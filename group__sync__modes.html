<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libmdbx: SYNC MODES</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libmdbx
   &#160;<span id="projectnumber">Please fetch tags and/or use non-obsolete git version.Please fetch tags and/or use non-obsolete git version.Please fetch tags and/or use non-obsolete git version.0 (2022-04-13T11:05:50+03:00)</span>
   </div>
   <div id="projectbrief">One of the fastest compact embeddable key-value ACID database without WAL.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__sync__modes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enumval-members">Enumerator</a>  </div>
  <div class="headertitle">
<div class="title">SYNC MODES</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section attention"><dt>Attention</dt><dd>Using any combination of <a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a586d75ff2fd68aed647a60ea7984ed85">MDBX_SAFE_NOSYNC</a>, <a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a323dae93247c4977621be38614d77b38">MDBX_NOMETASYNC</a> and especially <a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061aec1ed5ccbf0626391088f787ffc4962c">MDBX_UTTERLY_NOSYNC</a> is always a deal to reduce durability for gain write performance. You must know exactly what you are doing and what risks you are taking!</dd></dl>
<dl class="section note"><dt>Note</dt><dd>for LMDB users: <a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a586d75ff2fd68aed647a60ea7984ed85">MDBX_SAFE_NOSYNC</a> is NOT similar to LMDB_NOSYNC, but <a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061aec1ed5ccbf0626391088f787ffc4962c">MDBX_UTTERLY_NOSYNC</a> is exactly match LMDB_NOSYNC. See details below.</dd></dl>
<p>THE SCENE:</p><ul>
<li>The DAT-file contains several MVCC-snapshots of B-tree at same time, each of those B-tree has its own root page.</li>
<li>Each of meta pages at the beginning of the DAT file contains a pointer to the root page of B-tree which is the result of the particular transaction, and a number of this transaction.</li>
<li>For data durability, MDBX must first write all MVCC-snapshot data pages and ensure that are written to the disk, then update a meta page with the new transaction number and a pointer to the corresponding new root page, and flush any buffers yet again.</li>
<li>Thus during commit a I/O buffers should be flushed to the disk twice; i.e. fdatasync(), FlushFileBuffers() or similar syscall should be called twice for each commit. This is very expensive for performance, but guaranteed durability even on unexpected system failure or power outage. Of course, provided that the operating system and the underlying hardware (e.g. disk) work correctly.</li>
</ul>
<p>TRADE-OFF: By skipping some stages described above, you can significantly benefit in speed, while partially or completely losing in the guarantee of data durability and/or consistency in the event of system or power failure. Moreover, if for any reason disk write order is not preserved, then at moment of a system crash, a meta-page with a pointer to the new B-tree may be written to disk, while the itself B-tree not yet. In that case, the database will be corrupted!</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a8079fe157295e6743580c589af5a063c">MDBX_SYNC_DURABLE</a> </dd>
<dd>
<a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a323dae93247c4977621be38614d77b38">MDBX_NOMETASYNC</a> </dd>
<dd>
<a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061a586d75ff2fd68aed647a60ea7984ed85">MDBX_SAFE_NOSYNC</a> </dd>
<dd>
<a class="el" href="group__c__opening.html#gga9138119a904355d245777c4119534061aec1ed5ccbf0626391088f787ffc4962c">MDBX_UTTERLY_NOSYNC</a> </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
