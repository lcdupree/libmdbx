<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libmdbx: Databases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libmdbx
   &#160;<span id="projectnumber">Please fetch tags and/or use non-obsolete git version.Please fetch tags and/or use non-obsolete git version.Please fetch tags and/or use non-obsolete git version.0 (2022-04-13T11:05:50+03:00)</span>
   </div>
   <div id="projectbrief">One of the fastest compact embeddable key-value ACID database without WAL.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__c__dbi.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Databases<div class="ingroups"><a class="el" href="group__c__api.html">C API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gabd1b4fbb286e8269b6ceb79dbacd9417"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a></td></tr>
<tr class="memdesc:gabd1b4fbb286e8269b6ceb79dbacd9417"><td class="mdescLeft">&#160;</td><td class="mdescRight">A handle for an individual database (key-value spaces) in the environment.  <a href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">More...</a><br /></td></tr>
<tr class="separator:gabd1b4fbb286e8269b6ceb79dbacd9417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff44dbad00df293bcbbc2c87e811c663"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#gaff44dbad00df293bcbbc2c87e811c663">MDBX_db_flags_t</a></td></tr>
<tr class="separator:gaff44dbad00df293bcbbc2c87e811c663"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gafe3bddb297b3ab0d828a487c5726f76a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a> { <br />
&#160;&#160;<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa31d4843d8400091f8314d2b4f62794b4">MDBX_DB_DEFAULTS</a> = 0, 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa642007de41f20a9fbf18196b74e45d4c">MDBX_REVERSEKEY</a> = UINT32_C(0x02), 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a> = UINT32_C(0x04), 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437">MDBX_INTEGERKEY</a> = UINT32_C(0x08), 
<br />
&#160;&#160;<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa8517d5462fff6156349985b9366b56a4">MDBX_DUPFIXED</a> = UINT32_C(0x10), 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa007cf37d6fcf269801f9fa95230983e8">MDBX_INTEGERDUP</a> = UINT32_C(0x20), 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaafa2501551cfb4ef3126db95b63779c9">MDBX_REVERSEDUP</a> = UINT32_C(0x40), 
<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aad0235ae3602938cc0ca1c453d8c9fe27">MDBX_CREATE</a> = UINT32_C(0x40000), 
<br />
&#160;&#160;<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa0bab98f622248becbe218e08d184cddf">MDBX_DB_ACCEDE</a> = MDBX_ACCEDE
<br />
 }</td></tr>
<tr class="memdesc:gafe3bddb297b3ab0d828a487c5726f76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Database flags.  <a href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">More...</a><br /></td></tr>
<tr class="separator:gafe3bddb297b3ab0d828a487c5726f76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9bef4a9fdf27655e9343bbbf8b6fc5a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">mdbx_dbi_open</a> (<a class="el" href="group__c__transactions.html#gad3eb5aa2a23beb3dc6274c46dc236546">MDBX_txn</a> *txn, const char *name, <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a> flags, <a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> *dbi)</td></tr>
<tr class="memdesc:ga9bef4a9fdf27655e9343bbbf8b6fc5a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open or Create a database in the environment.  <a href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">More...</a><br /></td></tr>
<tr class="separator:ga9bef4a9fdf27655e9343bbbf8b6fc5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c0707cc17d08231d561903f78656cb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__api__macros.html#gaceae4b96a81a5b844a664ad8a61646e3">MDBX_DEPRECATED</a> <a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#ga4c0707cc17d08231d561903f78656cb6">mdbx_dbi_open_ex</a> (<a class="el" href="group__c__transactions.html#gad3eb5aa2a23beb3dc6274c46dc236546">MDBX_txn</a> *txn, const char *name, <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a> flags, <a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> *dbi, <a class="el" href="group__c__crud.html#ga18b0a45629a5e0262ce22bf63136b554">MDBX_cmp_func</a> *keycmp, <a class="el" href="group__c__crud.html#ga18b0a45629a5e0262ce22bf63136b554">MDBX_cmp_func</a> *datacmp)</td></tr>
<tr class="separator:ga4c0707cc17d08231d561903f78656cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d23ee97867170f184fc8f7faa80e392"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__dbi.html#ga8d23ee97867170f184fc8f7faa80e392">mdbx_dbi_close</a> (<a class="el" href="group__c__api.html#gaaf0e4c9dc12dce0c2a98566436c94222">MDBX_env</a> *env, <a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> dbi)</td></tr>
<tr class="memdesc:ga8d23ee97867170f184fc8f7faa80e392"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a database handle. Normally unnecessary.  <a href="group__c__dbi.html#ga8d23ee97867170f184fc8f7faa80e392">More...</a><br /></td></tr>
<tr class="separator:ga8d23ee97867170f184fc8f7faa80e392"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaff44dbad00df293bcbbc2c87e811c663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaff44dbad00df293bcbbc2c87e811c663">&#9670;&nbsp;</a></span>MDBX_db_flags_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a> <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gabd1b4fbb286e8269b6ceb79dbacd9417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd1b4fbb286e8269b6ceb79dbacd9417">&#9670;&nbsp;</a></span>MDBX_dbi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A handle for an individual database (key-value spaces) in the environment. </p>
<p>Zero handle is used internally (hidden Garbage Collection subDB). So, any valid DBI-handle great than 0 and less than or equal <a class="el" href="group__c__api.html#gga190b5c6e7f916f612c5819e1ab8acfdfac5988778fc33789ece8796cf9d2e77c2">MDBX_MAX_DBI</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1" title="Open or Create a database in the environment.">mdbx_dbi_open()</a> </dd>
<dd>
<a class="el" href="group__c__dbi.html#ga8d23ee97867170f184fc8f7faa80e392" title="Close a database handle. Normally unnecessary.">mdbx_dbi_close()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gafe3bddb297b3ab0d828a487c5726f76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe3bddb297b3ab0d828a487c5726f76a">&#9670;&nbsp;</a></span>MDBX_db_flags_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Database flags. </p>
<p><a class="anchor" id="db_flags"></a></p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1" title="Open or Create a database in the environment.">mdbx_dbi_open()</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa31d4843d8400091f8314d2b4f62794b4"></a>MDBX_DB_DEFAULTS&#160;</td><td class="fielddoc"><p>Variable length unique keys with usual byte-by-byte string comparison. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa642007de41f20a9fbf18196b74e45d4c"></a>MDBX_REVERSEKEY&#160;</td><td class="fielddoc"><p>Use reverse string comparison for keys. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd"></a>MDBX_DUPSORT&#160;</td><td class="fielddoc"><p>Use sorted duplicates, i.e. allow multi-values for a keys. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437"></a>MDBX_INTEGERKEY&#160;</td><td class="fielddoc"><p>Numeric keys in native byte order either uint32_t or uint64_t (must be one of uint32_t or uint64_t, other integer types, for example, signed integer or uint16_t will not work). The keys must all be of the same size and must be aligned while passing as arguments. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa8517d5462fff6156349985b9366b56a4"></a>MDBX_DUPFIXED&#160;</td><td class="fielddoc"><p>With <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a>; sorted dup items have fixed size. The data values must all be of the same size. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa007cf37d6fcf269801f9fa95230983e8"></a>MDBX_INTEGERDUP&#160;</td><td class="fielddoc"><p>With <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a> and with <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa8517d5462fff6156349985b9366b56a4">MDBX_DUPFIXED</a>; dups are fixed size like <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437">MDBX_INTEGERKEY</a> -style integers. The data values must all be of the same size and must be aligned while passing as arguments. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aaafa2501551cfb4ef3126db95b63779c9"></a>MDBX_REVERSEDUP&#160;</td><td class="fielddoc"><p>With <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a>; use reverse string comparison for data values. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aad0235ae3602938cc0ca1c453d8c9fe27"></a>MDBX_CREATE&#160;</td><td class="fielddoc"><p>Create DB if not already existing. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafe3bddb297b3ab0d828a487c5726f76aa0bab98f622248becbe218e08d184cddf"></a>MDBX_DB_ACCEDE&#160;</td><td class="fielddoc"><p>Opens an existing sub-database created with unknown flags.</p>
<p>The <code>MDBX_DB_ACCEDE</code> flag is intend to open a existing sub-database which was created with unknown flags (<a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa642007de41f20a9fbf18196b74e45d4c">MDBX_REVERSEKEY</a>, <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a>, <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437">MDBX_INTEGERKEY</a>, <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa8517d5462fff6156349985b9366b56a4">MDBX_DUPFIXED</a>, <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa007cf37d6fcf269801f9fa95230983e8">MDBX_INTEGERDUP</a> and <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaafa2501551cfb4ef3126db95b63779c9">MDBX_REVERSEDUP</a>).</p>
<p>In such cases, instead of returning the <a class="el" href="group__c__err.html#ggab5ba1469eef28a2e09ed243b608b11ceaf8d7b0a9b9c20a0eab9850268f616666">MDBX_INCOMPATIBLE</a> error, the sub-database will be opened with flags which it was created, and then an application could determine the actual flags by <a class="el" href="group__c__statinfo.html#gadd1dd791801fd714d19ff5e34061d95e">mdbx_dbi_flags()</a>. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8d23ee97867170f184fc8f7faa80e392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d23ee97867170f184fc8f7faa80e392">&#9670;&nbsp;</a></span>mdbx_dbi_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int mdbx_dbi_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__api.html#gaaf0e4c9dc12dce0c2a98566436c94222">MDBX_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a>&#160;</td>
          <td class="paramname"><em>dbi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a database handle. Normally unnecessary. </p>
<p>Closing a database handle is not necessary, but lets <a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">mdbx_dbi_open()</a> reuse the handle value. Usually it's better to set a bigger <a class="el" href="group__c__settings.html#ga39ab74bb9bbfaab1cc586642fec4559a">mdbx_env_set_maxdbs()</a>, unless that value would be large.</p>
<dl class="section note"><dt>Note</dt><dd>Use with care. This call is synchronized via mutex with <a class="el" href="group__c__dbi.html#ga8d23ee97867170f184fc8f7faa80e392">mdbx_dbi_close()</a>, but NOT with other transactions running by other threads. The "next" version of libmdbx (<a class="el" href="index.html#MithrilDB">MithrilDB</a>) will solve this issue.</dd></dl>
<p>Handles should only be closed if no other threads are going to reference the database handle or one of its cursors any further. Do not close a handle if an existing transaction has modified its database. Doing so can cause misbehavior from database corruption to errors like <a class="el" href="group__c__err.html#ggab5ba1469eef28a2e09ed243b608b11ceacd34ff32ff976dd9ce92536a59d208a3">MDBX_BAD_DBI</a> (since the DB name is gone).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>An environment handle returned by <a class="el" href="group__c__opening.html#ga109eb833997698fbb77912716596fe8e">mdbx_env_create()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbi</td><td>A database handle returned by <a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">mdbx_dbi_open()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero error value on failure and 0 on success. </dd></dl>

</div>
</div>
<a id="ga9bef4a9fdf27655e9343bbbf8b6fc5a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">&#9670;&nbsp;</a></span>mdbx_dbi_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int mdbx_dbi_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__transactions.html#gad3eb5aa2a23beb3dc6274c46dc236546">MDBX_txn</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> *&#160;</td>
          <td class="paramname"><em>dbi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open or Create a database in the environment. </p>
<p>A database handle denotes the name and parameters of a database, independently of whether such a database exists. The database handle may be discarded by calling <a class="el" href="group__c__dbi.html#ga8d23ee97867170f184fc8f7faa80e392">mdbx_dbi_close()</a>. The old database handle is returned if the database was already open. The handle may only be closed once.</p>
<dl class="section note"><dt>Note</dt><dd>A notable difference between MDBX and LMDB is that MDBX make handles opened for existing databases immediately available for other transactions, regardless this transaction will be aborted or reset. The REASON for this is to avoiding the requirement for multiple opening a same handles in concurrent read transactions, and tracking of such open but hidden handles until the completion of read transactions which opened them.</dd></dl>
<p>Nevertheless, the handle for the NEWLY CREATED database will be invisible for other transactions until the this write transaction is successfully committed. If the write transaction is aborted the handle will be closed automatically. After a successful commit the such handle will reside in the shared environment, and may be used by other transactions.</p>
<p>In contrast to LMDB, the MDBX allow this function to be called from multiple concurrent transactions or threads in the same process.</p>
<p>To use named database (with name != NULL), <a class="el" href="group__c__settings.html#ga39ab74bb9bbfaab1cc586642fec4559a">mdbx_env_set_maxdbs()</a> must be called before opening the environment. Table names are keys in the internal unnamed database, and may be read but not written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">txn</td><td>transaction handle returned by <a class="el" href="group__c__transactions.html#ga9621bd463ec9efb2373f25dfb016938a">mdbx_txn_begin()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the database to open. If only a single database is needed in the environment, this value may be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Special options for this database. This parameter must be bitwise OR'ing together any of the constants described here:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa31d4843d8400091f8314d2b4f62794b4">MDBX_DB_DEFAULTS</a> Keys are arbitrary byte strings and compared from beginning to end.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa642007de41f20a9fbf18196b74e45d4c">MDBX_REVERSEKEY</a> Keys are arbitrary byte strings to be compared in reverse order, from the end of the strings to the beginning.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437">MDBX_INTEGERKEY</a> Keys are binary integers in native byte order, either uint32_t or uint64_t, and will be sorted as such. The keys must all be of the same size and must be aligned while passing as arguments.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a> Duplicate keys may be used in the database. Or, from another point of view, keys may have multiple data items, stored in sorted order. By default keys must be unique and may have only a single data item.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa8517d5462fff6156349985b9366b56a4">MDBX_DUPFIXED</a> This flag may only be used in combination with <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaed33d978b4e23b7c1659e8106e9c7acd">MDBX_DUPSORT</a>. This option tells the library that the data items for this database are all the same size, which allows further optimizations in storage and retrieval. When all data items are the same size, the <a class="el" href="group__c__cursors.html#gga501baff3bcff7e8e7818b4d412a2a6d5a39d5f77b9ca5476e20a9b1677d08af5a">MDBX_GET_MULTIPLE</a>, <a class="el" href="group__c__cursors.html#gga501baff3bcff7e8e7818b4d412a2a6d5ad7961520cf44a6046d18e4408d7a98a7">MDBX_NEXT_MULTIPLE</a> and <a class="el" href="group__c__cursors.html#gga501baff3bcff7e8e7818b4d412a2a6d5a6e4dd76259777fcd36142bc2e5cfc06f">MDBX_PREV_MULTIPLE</a> cursor operations may be used to retrieve multiple items at once.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa007cf37d6fcf269801f9fa95230983e8">MDBX_INTEGERDUP</a> This option specifies that duplicate data items are binary integers, similar to <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aa91b02148f7ea36f66c77ea5bc1e69437">MDBX_INTEGERKEY</a> keys. The data values must all be of the same size and must be aligned while passing as arguments.</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aaafa2501551cfb4ef3126db95b63779c9">MDBX_REVERSEDUP</a> This option specifies that duplicate data items should be compared as strings in reverse order (the comparison is performed in the direction from the last byte to the first).</li>
<li><a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aad0235ae3602938cc0ca1c453d8c9fe27">MDBX_CREATE</a> Create the named database if it doesn't exist. This option is not allowed in a read-only transaction or a read-only environment.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dbi</td><td>Address where the new <a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> handle will be stored.</td></tr>
  </table>
  </dd>
</dl>
<p>For <a class="el" href="group__c__dbi.html#ga4c0707cc17d08231d561903f78656cb6">mdbx_dbi_open_ex()</a> additional arguments allow you to set custom comparison functions for keys and values (for multimaps). </p><dl class="section see"><dt>See also</dt><dd>avoid_custom_comparators</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero error value on failure and 0 on success, some possible errors are: </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MDBX_NOTFOUND</td><td>The specified database doesn't exist in the environment and <a class="el" href="group__c__dbi.html#ggafe3bddb297b3ab0d828a487c5726f76aad0235ae3602938cc0ca1c453d8c9fe27">MDBX_CREATE</a> was not specified. </td></tr>
    <tr><td class="paramname">MDBX_DBS_FULL</td><td>Too many databases have been opened. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__c__settings.html#ga39ab74bb9bbfaab1cc586642fec4559a" title="Set the maximum number of named databases for the environment.">mdbx_env_set_maxdbs()</a> </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MDBX_INCOMPATIBLE</td><td>Database is incompatible with given flags, i.e. the passed flags is different with which the database was created, or the database was already opened with a different comparison function(s). </td></tr>
    <tr><td class="paramname">MDBX_THREAD_MISMATCH</td><td>Given transaction is not owned by current thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4c0707cc17d08231d561903f78656cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c0707cc17d08231d561903f78656cb6">&#9670;&nbsp;</a></span>mdbx_dbi_open_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__api__macros.html#gaceae4b96a81a5b844a664ad8a61646e3">MDBX_DEPRECATED</a> <a class="el" href="group__c__api.html#ga3ff81c5c75bd3d7836f03a05649d5e8f">LIBMDBX_API</a> int mdbx_dbi_open_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__transactions.html#gad3eb5aa2a23beb3dc6274c46dc236546">MDBX_txn</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__dbi.html#gafe3bddb297b3ab0d828a487c5726f76a">MDBX_db_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__dbi.html#gabd1b4fbb286e8269b6ceb79dbacd9417">MDBX_dbi</a> *&#160;</td>
          <td class="paramname"><em>dbi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__crud.html#ga18b0a45629a5e0262ce22bf63136b554">MDBX_cmp_func</a> *&#160;</td>
          <td class="paramname"><em>keycmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__crud.html#ga18b0a45629a5e0262ce22bf63136b554">MDBX_cmp_func</a> *&#160;</td>
          <td class="paramname"><em>datacmp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000006">Deprecated:</a></b></dt><dd>Please <a class="el" href="group__c__crud.html#avoid_custom_comparators">avoid using custom comparators</a> and use <a class="el" href="group__c__dbi.html#ga9bef4a9fdf27655e9343bbbf8b6fc5a1">mdbx_dbi_open()</a> instead.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">txn</td><td>transaction handle returned by <a class="el" href="group__c__transactions.html#ga9621bd463ec9efb2373f25dfb016938a">mdbx_txn_begin()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the database to open. If only a single database is needed in the environment, this value may be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Special options for this database. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keycmp</td><td>Optional custom key comparison function for a database. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">datacmp</td><td>Optional custom data comparison function for a database. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dbi</td><td>Address where the new MDBX_dbi handle will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero error value on failure and 0 on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
